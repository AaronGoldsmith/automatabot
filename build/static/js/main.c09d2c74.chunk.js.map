{"version":3,"sources":["constants.js","components/GameBoard.js","actions.js","components/GameController.js","index.js","reducers/rootReducer.js"],"names":["GET_CHALLENGE","SET_PATH","SET_RESULT","Cell","_ref","alive","react_default","a","createElement","className","concat","CellGrid","_ref2","cells","map","cellList","i","row","key","cell","n","GameBoard_Cell","getNextBoard","challenge","Promise","resolve","_","getNextRow","Object","objectSpread","rules","birth","survival","aliveCount","getNeighbors","neighbor","x","y","filter","length","includes","col","neighbors","size","console","warn","j","push","domain","path","headers","content-type","GameController","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleSend","_this$state","state","url","sendGame","updateBoard","_this$state2","generation","then","gen","setState","tick","running","timer","setInterval","tock","ageToCompletion","_this$state3","handleRun","undefined","age","clearInterval","prevProps","prevState","Challenge","getGame","_this$state4","Fragment","onClick","React","Component","connect","PATH","dispatch","axios","get","response","type","data","challengePath","catch","error","log","post","result","rootElement","document","getElementById","storeWithThunk","createStore","arguments","action","applyMiddleware","ReduxThunk","ReactDOM","render","react_redux_es","store","components_GameController"],"mappings":"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","file":"static/js/main.c09d2c74.chunk.js","sourcesContent":["import axios from \"axios\";\n// const headers = { \"content-type\": \"application/json\" };\n\nexport const axios_get = (url, headers) => axios.get(url, headers);\nexport const axios_post = (url, body, headers) =>\n  axios.post(url, body, headers);\n\nexport const GET_CHALLENGE = \"GET_BOARD\";\nexport const SET_PATH = \"SET_PATH\";\nexport const SET_RESULT = \"SET_RESULT\"","import React from \"react\";\n\nconst Cell = ({ alive }) => <div className={`cell ${alive ? \"o\" : \"x\"}`} />;\nconst CellRow = (cells, row) => {\n  return (\n    <div key={row} className={`cell-row row-${row}`}>\n      {cells.map((cell, n) => (\n        <Cell key={n} alive={cell} />\n      ))}\n    </div>\n  );\n};\n\nexport const CellGrid = ({ cells }) => {\n  return cells ? cells.map((cellList, i) => CellRow(cellList, i)) : null;\n};\n\nexport const getNextBoard = (challenge) => new Promise(resolve => {\n  const cells = challenge.cells.map((_, row) => getNextRow(row, challenge));\n  const newBoard = { ...challenge, cells }\n  resolve(newBoard)\n})\n\nconst getNextRow = (n, challenge) => {\n  const { rules, cells } = challenge;\n  const row = cells[n];\n  const { birth, survival } = rules;\n  return row.map((_, i) => {\n    const neighborStates = getNeighbors(n, i, cells).map(\n      neighbor => cells[neighbor.x][neighbor.y]);\n    const aliveCount = neighborStates.filter(cell => cell === 1).length;\n\n    // return state of next cell at [n][i] = row[i]\n    if (row[i] === 1)\n      return survival.includes(aliveCount) ? 1 : 0;\n    else return birth.includes(aliveCount) ? 1 : 0;\n  });\n}\n\nconst getNeighbors = (row, col, cells) => {\n  let neighbors = [];\n\n  const size = cells ? cells.length : 0\n  if(size > cells[0].length){\n    console.warn('warning')\n  }\n  for (let i = row - 1; i <= row + 1; i++) {\n    for (let j = col - 1; j <= col + 1; j++) {\n      if (row === i && col === j) { continue; }\n      else if (i >= 0 && j >= 0 && i < size && j < cells[j].length)\n        neighbors.push({ x: i, y: j });\n    }\n  }\n  return neighbors;\n}","// TODO: determine why longer boards (vs taller) break prog\n//          \nimport axios from \"axios\";\nimport { GET_CHALLENGE, SET_PATH, SET_RESULT } from \"./constants\";\nconst domain = \"https://api.noopschallenge.com\";\nconst path = \"/automatabot/challenges/new\"; //   or new\nconst headers = { \"content-type\": \"application/json\" };\n\nexport function getGame() {\n  const PATH = `${domain}${path}`;\n  return dispatch => {\n    axios\n      .get(PATH, { headers })\n      .then(response => {\n        // console.log(response.data);\n        dispatch({\n          type: GET_CHALLENGE,\n          challenge: response.data.challenge\n        });\n        dispatch({\n          type: SET_PATH,\n          data: response.data.challengePath\n        });\n      })\n      .catch(error => console.log(error));\n  };\n}\n\nexport function sendGame(url, data) {\n  return dispatch => {\n    axios.post(url, data, { headers })\n      .then(response => {\n        console.log(response);\n        dispatch({type: SET_RESULT,\n        data: response.result})\n      })\n      .catch(error => console.log(error));\n  }\n}\n","// TODO: - age to n\n//       - performance optimze (no violation msg)\n//       - display game info\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { CellGrid, getNextBoard } from \"./GameBoard\"\nimport { getGame, sendGame } from \"../actions\";\n\n// handleSend = () => {\n//   // deconstruct from state\n//   const { url, automata } = this.state;\n//   const { board } = automata;\n//   return this.props.handleSend(url, board);\n// };\n\n\nclass GameController extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { running: false, generation: 0 };\n    this.timer = undefined;\n    this.age = 0;\n  }\n\n  handleSend = () => {\n    // deconstruct from state\n    const { url, challenge } = this.state;\n    const { cells } = challenge;\n    this.props.sendGame(url, { cells });\n  };\n  updateBoard = () => {\n    const { challenge, generation } = this.state;\n    Promise.resolve(getNextBoard(challenge)).then(challenge => {\n      const gen = generation + 1;\n      this.setState({ challenge, generation: gen })\n    })\n  }\n\n  tick = () => {\n    const { running } = this.state;\n\n    if (!this.timer && running) {\n      this.timer = setInterval(this.updateBoard, 100)\n    }\n    else { this.tock() }\n  }\n\n  tock() { \n    clearInterval(this.timer);\n    this.timer=null; \n  }\n\n  ageToCompletion = () =>  {\n    const { challenge, generation } = this.state;\n      if(generation < challenge.generation){\n        this.updateBoard().then(this.ageToCompletion())\n      }\n    }\n\n\n\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props.Challenge !== prevProps.Challenge && this.props.Challenge) {\n      this.setState({ challenge: this.props.Challenge });\n    }\n    if (prevState.running !== this.state.running) {\n      this.tick();\n    }\n  }\n\n  // on mount: initialize and run\n  componentDidMount() {\n    this.props.getGame();\n  }\n  \n  handleRun = () => {\n    const { running } = this.state\n    this.setState({ running: !running })\n  }\n\n  render() {\n    const { challenge, running } = this.state;\n    const cells = challenge ? challenge.cells : null;\n    return (\n      <React.Fragment>\n      <div className=\"cellWrap\">\n        <CellGrid cells={cells} />\n      </div>\n        <button onClick={this.handleSend}>send</button>\n        <button onClick={this.handleRun}>{running ? 'pause' : 'start'}</button>\n        {/* <button onClick={this.ageToCompletion}>{`age to ${ageTo}`}</button> */}\n      </React.Fragment>\n    );\n  }\n}\n// export default Game;\nfunction mapStateToProps(state) {\n  return {\n    Challenge: state.challenge\n  };\n}\nexport default connect(\n  mapStateToProps,\n  { getGame, sendGame }\n)(GameController);\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport ReduxThunk from \"redux-thunk\";\nimport rootReducer from \"./reducers/rootReducer\";\nimport { Provider } from \"react-redux\";\nimport { createStore, applyMiddleware } from \"redux\";\nimport GameController from \"./components/GameController\";\nimport \"./Game.css\";\nfunction App() {\n  return (\n    <div className=\"App\">\n      <GameController />\n    </div>\n  );\n}\nconst rootElement = document.getElementById(\"root\");\nconst storeWithThunk = createStore(rootReducer, applyMiddleware(ReduxThunk));\nReactDOM.render(\n  <Provider store={storeWithThunk}> <App /> </Provider>,\n  rootElement\n);\n","import { GET_CHALLENGE, SET_PATH, SET_RESULT } from \"../constants\";\n\n//  setup for generic reducer configuration\nexport default function(state = { challenge: {}, path: undefined, result: undefined }, action) {\n  switch (action.type) {\n    case GET_CHALLENGE:\n      return { ...state, challenge: action.challenge };\n    case SET_PATH:\n      return { ...state, path: action.data };\n    case SET_RESULT:\n      return { ...state, result: action.data };\n    default:\n      return state;\n  }\n}\n"],"sourceRoot":""}